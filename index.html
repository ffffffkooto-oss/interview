<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ç¯¤æœˆ é¢è¯•æµ‹è¯„</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --border:#e5e7eb;
      --blue:#2563eb;
      --blue2:#1d4ed8;
      --shadow: 0 20px 60px rgba(17,24,39,.08);
      --radius: 18px;
      --soft:#f9fafb;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
      background: radial-gradient(1200px 500px at 50% -120px, #ffffff 0%, var(--bg) 60%);
      color:var(--text);
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px 16px;
    }
    .container{ width: min(980px, 100%); }
    .card{
      background:var(--card);
      border:1px solid rgba(229,231,235,.8);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 46px 54px;
    }
    @media (max-width: 640px){
      .card{ padding: 26px 18px; }
    }

    .hero{ text-align:center; margin-bottom: 24px; }
    .logo{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      font-weight: 900;
      letter-spacing: .2px;
      font-size: 34px;
      line-height: 1.2;
    }
    .logo .mark{
      width: 34px; height: 34px;
      border-radius: 10px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border: 1px solid var(--border);
      background: #fff;
      box-shadow: 0 10px 18px rgba(17,24,39,.06);
      font-size: 18px;
    }

    .field{ margin: 14px auto 0; max-width: 680px; }
    .input, .select, .textarea{
      width:100%;
      border:1px solid var(--border);
      border-radius: 12px;
      padding: 14px 14px;
      font-size: 14px;
      outline: none;
      background:#fff;
      transition: border-color .15s ease, box-shadow .15s ease;
    }
    .input:focus, .select:focus, .textarea:focus{
      border-color: rgba(37,99,235,.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }
    .textarea{
      min-height: 140px;
      resize: vertical;
    }

    .row{
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
      max-width: 680px;
      margin: 12px auto 0;
    }
    .row .col{ flex: 1 1 240px; }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border: 0;
      background: var(--blue);
      color: #fff;
      border-radius: 10px;
      padding: 12px 18px;
      font-size: 15px;
      font-weight: 800;
      cursor:pointer;
      transition: transform .05s ease, background .15s ease;
      user-select:none;
      min-width: 160px;
    }
    .btn:hover{ background: var(--blue2); }
    .btn:active{ transform: translateY(1px); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }

    .btn.secondary{
      background:#fff;
      color: var(--text);
      border: 1px solid var(--border);
      font-weight: 800;
      min-width: auto;
    }
    .btn.secondary:hover{ background:#f9fafb; }

    .centerActions{
      display:flex;
      justify-content:center;
      margin-top: 18px;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Question View */
    .qTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 12px;
      margin-bottom: 18px;
    }
    .qProgress{
      color: var(--muted);
      font-size: 13px;
    }
    .qTitle{
      font-size: 28px;
      font-weight: 900;
      line-height: 1.3;
      color: var(--blue);
      margin: 10px 0 14px;
      white-space: pre-wrap;
    }
    .qActions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top: 16px;
      gap: 12px;
      flex-wrap: wrap;
    }
    .rightActions{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
    }
    .subHint{
      margin-top: 10px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
      white-space: pre-wrap;
    }

    /* Thank you */
    .thanks{ text-align:center; padding: 10px 0 0; }
    .thanks h2{ margin: 8px 0 6px; font-size: 22px; }
    .thanks p{ margin: 0; color: var(--muted); line-height: 1.8; }

    /* Admin (hidden / minimal) */
    .adminWrap{
      margin-top: 18px;
      border-top: 1px solid var(--border);
      padding-top: 14px;
      max-width: 760px;
      margin-left:auto;
      margin-right:auto;
    }
    .adminToggle{
      text-align:center;
      font-size: 12px;
      color: var(--muted);
      user-select:none;
      cursor:pointer;
    }
    .adminPanel{
      display:none;
      margin-top: 12px;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
      background: var(--soft);
    }
    .adminRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
      margin-top:10px;
    }
    .adminNote{
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
      white-space: pre-wrap;
      text-align:left;
      margin-top:10px;
    }
    .adminBox{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:center;
    }
    .pill{
      display:inline-block;
      border:1px solid var(--border);
      border-radius:999px;
      padding: 4px 10px;
      background:#fff;
      font-size:12px;
      color:#374151;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="card">

      <!-- START -->
      <div id="viewStart">
        <div class="hero">
          <div class="logo">
            <span class="mark">ğŸ€</span>
            <span>ç¯¤æœˆé¢è¯•æµ‹è¯„</span>
          </div>
        </div>

        <div class="field">
          <input id="candName" class="input" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" autocomplete="name" />
        </div>

        <div class="field">
          <select id="role" class="select">
            <option value="OPS" selected>è¿è¥å˜ç°å²—ï¼ˆPR+PM åˆå¹¶ï¼‰</option>
            <option value="SALES">é”€å”®å²—ï¼ˆæ—¥æœ¬å®¢æˆ·ï¼‰</option>
          </select>
        </div>

        <div class="field">
          <textarea id="candIntro" class="textarea" placeholder="è‡ªæˆ‘æè¿°ï¼ˆå»ºè®®ï¼šä½ åšè¿‡ä»€ä¹ˆã€è´Ÿè´£ä»€ä¹ˆã€ç»“æœ/æ•°æ®ã€ä½ æ“…é•¿ä»€ä¹ˆï¼‰"></textarea>
        </div>

        <div class="centerActions">
          <button class="btn" id="btnStart">ç«‹å³å¼€å§‹æµ‹è¯„</button>
          <button class="btn secondary" id="btnClearLocal">æ¸…é™¤æœ¬åœ°è®°å½•</button>
        </div>

        <!-- Admin entry (very subtle) -->
        <div class="adminWrap">
          <div class="adminToggle" id="adminToggleStart">ç®¡ç†å‘˜å…¥å£</div>
          <div class="adminPanel" id="adminPanelStart">
            <div class="adminBox">
              <input id="adminPwdStart" class="input" style="max-width:260px" placeholder="ç®¡ç†å‘˜å¯†ç " />
              <button class="btn secondary" id="btnUnlockStart">è§£é”</button>
            </div>
            <div class="adminRow" id="adminActionsStart" style="display:none;">
              <span class="pill">å·²è§£é”</span>
              <button class="btn secondary" id="btnResetAllStart">é‡ç½®å…¨éƒ¨æ•°æ®</button>
            </div>
            <div class="adminNote">
è¯´æ˜ï¼šç®¡ç†å‘˜åŠŸèƒ½ä»…ç”¨äºå¤åˆ¶é—®ç­”å¹¶ç”ŸæˆæŠ¥å‘Šã€‚å€™é€‰äººæ— éœ€æ“ä½œã€‚
            </div>
          </div>
        </div>
      </div>

      <!-- QUESTION -->
      <div id="viewQuestion" style="display:none;">
        <div class="qTop">
          <div class="qProgress" id="progressText">Question 1/10</div>
          <div class="qProgress" id="roleText">è¿è¥å˜ç°å²—</div>
        </div>

        <div class="qTitle" id="qTitle">é¢˜ç›®ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ</div>

        <textarea id="answer" class="textarea" placeholder="åœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å›ç­”..."></textarea>

        <div class="qActions">
          <button class="btn secondary" id="btnPrev">ä¸Šä¸€é¢˜</button>
          <div class="rightActions">
            <button class="btn secondary" id="btnSave">ä¿å­˜</button>
            <button class="btn" id="btnNext">ä¸‹ä¸€é¢˜</button>
          </div>
        </div>

        <div class="subHint" id="smallHint"></div>

        <!-- Admin entry (very subtle) -->
        <div class="adminWrap">
          <div class="adminToggle" id="adminToggleQ">ç®¡ç†å‘˜å…¥å£</div>
          <div class="adminPanel" id="adminPanelQ">
            <div class="adminBox">
              <input id="adminPwdQ" class="input" style="max-width:260px" placeholder="ç®¡ç†å‘˜å¯†ç " />
              <button class="btn secondary" id="btnUnlockQ">è§£é”</button>
            </div>

            <div id="adminActionsQ" style="display:none;">
              <div class="adminRow">
                <span class="pill">å·²è§£é”</span>
                <span class="pill" id="followCountPill">è¿½é—®è§¦å‘ï¼š0/3</span>
              </div>
              <div class="adminRow">
                <button class="btn secondary" id="btnCopyAll">ä¸€é”®å¤åˆ¶ï¼šæç¤ºè¯ + é—®ç­”</button>
                <button class="btn secondary" id="btnCopyQA">ä»…å¤åˆ¶ï¼šé—®ç­”</button>
                <button class="btn secondary" id="btnResetAllQ">é‡ç½®å…¨éƒ¨æ•°æ®</button>
              </div>
              <div class="adminNote">
ç”¨æ³•ï¼šç‚¹å‡»å¤åˆ¶ â†’ ç²˜è´´åˆ° ChatGPT â†’ ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šã€‚
ï¼ˆå€™é€‰äººé¡µé¢ä¸ä¼šè”ç½‘ï¼Œä¸ä¼šè‡ªåŠ¨ç”ŸæˆæŠ¥å‘Šï¼‰
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- THANKS -->
      <div id="viewThanks" style="display:none;">
        <div class="thanks">
          <div class="hero" style="margin-bottom: 10px;">
            <div class="logo">
              <span class="mark">ğŸ€</span>
              <span>æµ‹è¯„å®Œæˆ</span>
            </div>
          </div>
          <h2>æ„Ÿè°¢å‚ä¸æœ¬æ¬¡æµ‹è¯„ï¼</h2>
          <p>æˆ‘ä»¬ä¼šåœ¨å®¡æ ¸åä¸æ‚¨è”ç³»ã€‚ç¥ä½ ä»Šå¤©é¡ºåˆ©ï¼šï¼‰</p>

          <div class="centerActions" style="margin-top:18px;">
            <button class="btn secondary" id="btnBackHome">è¿”å›é¦–é¡µ</button>
          </div>
        </div>

        <!-- Admin entry (very subtle) -->
        <div class="adminWrap">
          <div class="adminToggle" id="adminToggleThanks">ç®¡ç†å‘˜å…¥å£</div>
          <div class="adminPanel" id="adminPanelThanks">
            <div class="adminBox">
              <input id="adminPwdThanks" class="input" style="max-width:260px" placeholder="ç®¡ç†å‘˜å¯†ç " />
              <button class="btn secondary" id="btnUnlockThanks">è§£é”</button>
            </div>

            <div id="adminActionsThanks" style="display:none;">
              <div class="adminRow">
                <span class="pill">å·²è§£é”</span>
                <span class="pill" id="followCountPill2">è¿½é—®è§¦å‘ï¼š0/3</span>
              </div>
              <div class="adminRow">
                <button class="btn secondary" id="btnCopyAll2">ä¸€é”®å¤åˆ¶ï¼šæç¤ºè¯ + é—®ç­”</button>
                <button class="btn secondary" id="btnCopyQA2">ä»…å¤åˆ¶ï¼šé—®ç­”</button>
                <button class="btn secondary" id="btnResetAllThanks">é‡ç½®å…¨éƒ¨æ•°æ®</button>
              </div>
              <div class="adminNote">
ç”¨æ³•ï¼šç‚¹å‡»å¤åˆ¶ â†’ ç²˜è´´åˆ° ChatGPT â†’ ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šã€‚
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

<script>
  // ======================
  // é…ç½®
  // ======================
  const STORAGE_KEY = "atsuzuki_full_v1";
  const ADMIN_PASSWORD = "admin123"; // ä½ è¦æ”¹å¯†ç å°±åœ¨è¿™é‡Œæ”¹
  const MAX_FOLLOWUPS = 3;           // è¿½é—®æœ€å¤šè§¦å‘ 3 æ¬¡ï¼ˆå…¨å±€ï¼‰
  const FOLLOW_MODE = "natural";     // â˜… å›ºå®šä¸ºè‡ªç„¶æ¨¡å¼ï¼ˆä¸å†è®©å€™é€‰äººé€‰æ‹©ï¼‰

  // ======================
  // é¢˜åº“ï¼ˆä¸­æ–‡ï¼Œä¸¤å¤§ç±»ï¼Œå„10é¢˜ï¼›è¿½é—®æŒ‰éœ€è§¦å‘ï¼‰
  // ======================
  const QUESTIONNAIRE = {
    OPS: [
      { id:"OPS01", q:"ã€Caseã€‘æ—¥æœ¬å®¢æˆ·å¸Œæœ›é€šè¿‡å°çº¢ä¹¦/æŠ–éŸ³å¸¦æ¥å®é™…å˜ç°ï¼ˆåˆ°åº—/é¢„çº¦/ä¸‹å•ï¼‰ã€‚ä½ ä¼šå¦‚ä½•æŠŠç›®æ ‡æ‹†æˆå¯æ‰§è¡Œç­–ç•¥ä¸èŠ‚å¥ï¼Ÿ", f:"ä½ ä¼šæŠŠâ€œå˜ç°â€å®šä¹‰æˆå“ªç§å£å¾„ï¼Ÿå¦‚ä½•é¿å…ç›®æ ‡è·‘åï¼Ÿ" },
      { id:"OPS02", q:"åŒä¸€å®¶åº—ï¼Œä½ ä¼šå¦‚ä½•åŒºåˆ†å°çº¢ä¹¦ä¸æŠ–éŸ³çš„å†…å®¹æ‰“æ³•ï¼Ÿï¼ˆäººç¾¤/é€‰é¢˜/ç»“æ„/èŠ‚å¥ï¼‰", f:"ä½ ä¼šå…ˆéªŒè¯å“ªä¸€ä¸ªå…³é”®å‡è®¾ï¼Ÿæ€ä¹ˆéªŒè¯ï¼Ÿ" },
      { id:"OPS03", q:"è¯·è®²æ¸…æ¥šä¸€æ¡15ç§’æ¢åº—çŸ­è§†é¢‘è„šæœ¬ï¼šå¼€å¤´3ç§’å¦‚ä½•æŠ“äººï¼Ÿä¸­æ®µæ€ä¹ˆä¼ é€’ä¿¡æ¯ï¼Ÿç»“å°¾æ€ä¹ˆå¼•å¯¼è¡ŒåŠ¨ï¼Ÿ", f:"å¦‚æœå®¢æˆ·è¯´â€œä»€ä¹ˆéƒ½è¦è®²â€ï¼Œä½ æ€ä¹ˆå–èˆï¼Ÿ" },
      { id:"OPS04", q:"ä½ å¦‚ä½•ç­›é€‰é€‚åˆæ¢åº—çš„KOC/KOLï¼Ÿè¯·è¯´3-5ä¸ªæ ¸å¿ƒåˆ¤æ–­ç»´åº¦ï¼Œå¹¶è¯´æ˜åŸå› ã€‚", f:"ä½ å¦‚ä½•è¯†åˆ«åˆ·é‡/è™šå‡æ•°æ®ï¼Ÿ" },
      { id:"OPS05", q:"ã€Caseã€‘åŒæ—¶ç®¡ç†10ä½è¾¾äºº+2å®¶åº—çš„æ¢åº—é¡¹ç›®ï¼Œä½ å¦‚ä½•è®¾è®¡SOPä¿è¯äº¤ä»˜ä¸æ··ä¹±ï¼Ÿ", f:"å“ªä¸ªç¯èŠ‚æœ€å®¹æ˜“ç¿»è½¦ï¼Ÿä½ çš„é¢„æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ" },
      { id:"OPS06", q:"ã€Caseã€‘åº—å®¶ä¸´æ—¶åŠ éœ€æ±‚ï¼ˆåŠ æ‹/æ”¹è„šæœ¬/åŠ è¾¾äººï¼‰ä½†é¢„ç®—ä¸å˜ï¼Œä½ å¦‚ä½•æ§èŒƒå›´å¹¶æ¨è¿›ï¼Ÿ", f:"è¯·ç»™ä¸€å¥å¯¹å®¢è¯æœ¯ï¼ˆä¸æ¨é”…ã€èƒ½æ¨è¿›ã€èƒ½å®ˆè¾¹ç•Œï¼‰ã€‚" },
      { id:"OPS07", q:"å†…å®¹çˆ†äº†ä½†è½¬åŒ–ä¸€èˆ¬ï¼ˆåˆ°åº—/é¢„çº¦/ä¸‹å•ä¸æ˜æ˜¾ï¼‰ï¼Œä½ ä¼šæ€ä¹ˆå½’å› å¹¶è°ƒæ•´ï¼Ÿ", f:"ä½ ä¼˜å…ˆæ”¹â€œè¾¾äººç±»å‹/å†…å®¹å½¢å¼/å–ç‚¹è¡¨è¾¾/åˆ°åº—é“¾è·¯â€å“ªä¸€ä¸ªï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" },
      { id:"OPS08", q:"å®¢æˆ·åªå…³å¿ƒâ€œæœ‰æ²¡æœ‰æ•ˆæœâ€ï¼Œä½ å¦‚ä½•ç”¨æŒ‡æ ‡ä½“ç³»è§£é‡Šï¼Œå¹¶ç»™å‡ºä¸‹æœˆè¡ŒåŠ¨å»ºè®®ï¼Ÿ", f:"æ²¡æœ‰åˆ°åº—æ•°æ®æ—¶ï¼Œä½ å¦‚ä½•è®¾è®¡æ›¿ä»£è¡¡é‡ï¼ˆé—­ç¯ï¼‰ï¼Ÿ" },
      { id:"OPS09", q:"PRäº§èƒ½ä¸è¶³å½±å“æ’æœŸï¼Œä½ å¦‚ä½•åè°ƒèµ„æºã€è°ƒæ•´ä¼˜å…ˆçº§ï¼Œå¹¶ä¿è¯å¯¹å®¢æˆ·äº¤ä»˜å¯æ§ï¼Ÿ", f:"ä½ ä¼šæ€ä¹ˆåˆ¶å®šSLA/å˜æ›´è§„åˆ™ï¼ˆèŒƒå›´ã€æ—¶é™ã€è¿”å·¥æ¬¡æ•°ã€åŠ æ€¥ï¼‰ï¼Ÿ" },
      { id:"OPS10", q:"é¡¹ç›®å‡ºç°é‡å¤§å»¶æœŸ/ç¿»è½¦é£é™©ï¼Œä½ æ±‡æŠ¥æ—¶é‡ç‚¹æ”¾å“ªé‡Œï¼Ÿå¦‚ä½•æŠŠé£é™©å‰ç½®å¹¶å‡å°‘ä¸å¯æ§ï¼Ÿ", f:"ç»™å‡ºä½ çš„â€œå»¶æœŸè¯´æ˜ç»“æ„â€ï¼ˆäº‹å®/å½±å“/è¡¥æ•‘/é¢„é˜²ï¼‰ã€‚" }
    ],
    SALES: [
      { id:"SAL01", q:"è¯·ç”¨30ç§’å‘æ—¥æœ¬å®¢æˆ·è§£é‡Šï¼šæˆ‘ä»¬èƒ½ä¸ºä»–ä»¬å¸¦æ¥ä»€ä¹ˆï¼ˆè´¦å·è¿è¥ + KOC/KOLæ¢åº—ï¼‰ã€‚ä¸è¦ç”¨ç©ºæ³›è¥é”€è¯ã€‚", f:"å®¢æˆ·è¯´â€œæˆ‘è‡ªå·±ä¹Ÿèƒ½å‘SNSâ€ï¼Œä½ æ€ä¹ˆå›åº”ï¼Ÿ" },
      { id:"SAL02", q:"ç¬¬ä¸€æ¬¡å•†è°ˆä½ ä¼šé—®å®¢æˆ·å“ªäº›é—®é¢˜ï¼Ÿè‡³å°‘8ä¸ªï¼Œå¹¶è¯´æ˜æ¯ä¸ªé—®é¢˜æƒ³éªŒè¯ä»€ä¹ˆã€‚", f:"ä½ æ€ä¹ˆåˆ¤æ–­å®¢æˆ·çœŸæ­£æƒ³è¦çš„æ˜¯â€œæ›å…‰â€è¿˜æ˜¯â€œå˜ç°â€ï¼Ÿ" },
      { id:"SAL03", q:"ã€Caseã€‘å®¢æˆ·è¯´ï¼šKOC/KOLæ•ˆæœä¸å¯æ§ã€æ‹…å¿ƒç¿»è½¦ã€‚ä½ å¦‚ä½•å»ºç«‹ä¿¡ä»»å¹¶æ¨è¿›ä¸‹ä¸€æ­¥ï¼Ÿ", f:"ä½ ä¼šç”¨å“ª3ä¸ªâ€œå¯æ§ç‚¹â€é™ä½å®¢æˆ·ç„¦è™‘ï¼Ÿ" },
      { id:"SAL04", q:"ã€Caseã€‘å®¢æˆ·é¢„ç®—å¾ˆå°ä½†æƒ³è¦æ˜æ˜¾æ•ˆæœï¼Œä½ æ€ä¹ˆè®¾è®¡é˜¶æ®µæ–¹æ¡ˆï¼ˆè¯•ç‚¹â†’æ”¾é‡â†’ç»´æŠ¤ï¼‰ï¼Ÿ", f:"ä½ å¦‚ä½•è®¾ç½®å¯é‡åŒ–é¢„æœŸï¼Œé¿å…åç»­æ‰¯çš®ï¼Ÿ" },
      { id:"SAL05", q:"å®¢æˆ·å¯¹å†…å®¹ä¸æ»¡æ„ï¼ˆè§‰å¾—ä¸é«˜çº§/ä¸ç¬¦åˆå“ç‰Œï¼‰ï¼Œä½ ç¬¬ä¸€ååº”æ˜¯ä»€ä¹ˆï¼Ÿä½ æ€ä¹ˆå¤„ç†ï¼Ÿ", f:"ä½ å¦‚ä½•åœ¨ä¸ä¼¤å…³ç³»çš„æƒ…å†µä¸‹æ¨è¿›â€œå¯æ‰§è¡Œçš„ä¿®æ”¹â€ï¼Ÿ" },
      { id:"SAL06", q:"å®¢æˆ·è¦æ±‚â€œå¤šåšä¸€ç‚¹ä½†ä¸åŠ é’±â€ï¼Œä½ æ€ä¹ˆå¤„ç†ï¼Ÿç»™å‡ºä½ çš„è¯æœ¯ä¸åº•çº¿ã€‚", f:"ä½ å¦‚ä½•æŠŠå˜æ›´/åŠ ä»·è§„åˆ™è¯´å¾—ä¸“ä¸šä¸”ä¸ç”Ÿç¡¬ï¼Ÿ" },
      { id:"SAL07", q:"ã€Caseã€‘å•†è°ˆåå®¢æˆ·ä¸¤å‘¨ä¸å›å¤ï¼Œä½ å¦‚ä½•è·Ÿè¿›æ—¢ä¸æ‹›äººçƒ¦åˆèƒ½æ¨è¿›ï¼Ÿ", f:"ä½ æ€ä¹ˆåˆ¤æ–­è¯¥ç»§ç»­è¿½è¿˜æ˜¯æ”¾å¼ƒï¼Ÿ" },
      { id:"SAL08", q:"ä½ å¦‚ä½•å’Œè¿è¥å›¢é˜Ÿå¯¹é½ï¼Œé¿å…é”€å”®æ‰¿è¯ºä¸äº¤ä»˜ä¸ä¸€è‡´ï¼Ÿä½ ä¼šæ€ä¹ˆåšä¿¡æ¯åŒæ­¥ï¼Ÿ", f:"ç­¾çº¦å‰ä½ ä¼šè®©å®¢æˆ·ç¡®è®¤å“ªäº›å…³é”®æ¡æ¬¾ï¼ˆèŒƒå›´/å®¡æ ¸/å‘¨æœŸ/å˜æ›´ï¼‰ï¼Ÿ" },
      { id:"SAL09", q:"è¯´ä¸€æ¬¡ä½ æ¨è¿›å¤±è´¥çš„å•†æœºï¼šä½ æ€ä¹ˆå¤ç›˜ï¼Ÿä¸‹æ¬¡ä¼šæ”¹å˜ä»€ä¹ˆï¼Ÿ", f:"ä½ å¤ç›˜æ›´çœ‹é‡è¿‡ç¨‹è¿˜æ˜¯ç»“æœï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" },
      { id:"SAL10", q:"ä½ ä¸ºä»€ä¹ˆæƒ³åšæ—¥æœ¬å®¢æˆ·ä¸šåŠ¡ï¼Ÿæœªæ¥1-2å¹´æ€ä¹ˆè§„åˆ’ï¼Ÿ", f:"é«˜å‹/è¢«æ‹’ç»å¤šæ—¶ï¼Œä½ å¦‚ä½•ä¿æŒç¨³å®šï¼Ÿ" }
    ]
  };

  // ======================
  // æ™ºèƒ½è¿½é—®è§¦å‘è§„åˆ™ï¼ˆè‡ªç„¶æ¨¡å¼ï¼‰
  // ======================
  const EMPTY_WORDS = [
    "å°½é‡","åŠªåŠ›","è®¤çœŸ","åŠ å¼º","æå‡","é…åˆ","è·Ÿè¿›","ä¼˜åŒ–ä¸€ä¸‹","çœ‹æƒ…å†µ","å…¨åŠ›ä»¥èµ´","å°½å¯èƒ½",
    "å¤šæ²Ÿé€š","ç§¯æ","è®¤çœŸè´Ÿè´£","ä¿è¯å®Œæˆ","åšåˆ°æœ€å¥½","åŠ å¼ºåä½œ","æŒç»­ä¼˜åŒ–","ä¸æ–­æå‡"
  ];
  const KEY_SIGNALS = [
    "æŒ‡æ ‡","æ•°æ®","SOP","å¤ç›˜","è´Ÿè´£äºº","æ—¶é—´","é‡Œç¨‹ç¢‘","é£é™©","é¢„ç®—","ROI","æˆæœ¬","æ–¹æ¡ˆ",
    "éªŒè¯","å‡è®¾","è½¬åŒ–","æ¼æ–—","ä¼˜å…ˆçº§","èŒƒå›´","å˜æ›´","SLA","äº¤ä»˜","éªŒæ”¶","å‘¨æœŸ","äº§å‡º"
  ];
  function countHits(text, dict){
    let hits = 0;
    dict.forEach(w => { if(text.includes(w)) hits++; });
    return hits;
  }
  function rulePack(role){
    // naturalï¼šä½ æƒ³æ›´ä¸¥å°±æŠŠ minLen/minSignals è°ƒå¤§
    return role === "OPS" ? { minLen: 80, minSignals: 2 } : { minLen: 70, minSignals: 2 };
  }
  function shouldAskFollowup(role, answer){
    const a = answer.trim();
    const r = rulePack(role);

    if(a.length < r.minLen) return { yes:true, reason:`å›ç­”åçŸ­ï¼ˆ${a.length}å­—ï¼‰` };

    const emptyHit = EMPTY_WORDS.find(w => a.includes(w));
    if(emptyHit) return { yes:true, reason:`è¡¨è¾¾åæ³›ï¼ˆå‘½ä¸­ã€Œ${emptyHit}ã€ï¼‰` };

    const signalHits = countHits(a, KEY_SIGNALS);
    if(signalHits < r.minSignals) return { yes:true, reason:`å…³é”®è¦ç´ ä¸è¶³ï¼ˆå‘½ä¸­${signalHits}é¡¹ï¼‰` };

    return { yes:false, reason:"" };
  }

  // ======================
  // çŠ¶æ€
  // ======================
  let state = {
    role: "OPS",
    name: "",
    intro: "",
    idx: 0,
    stage: "main",        // main | followup
    followReason: "",
    followCount: 0,       // å·²è§¦å‘è¿½é—®æ¬¡æ•°ï¼ˆä¸Šé™3ï¼‰
    suppressedFollowups: [], // è®°å½•ï¼šæœ¬åº”è¿½é—®ä½†å› ä¸Šé™æœªè§¦å‘ï¼ˆç”¨äºæŠ¥å‘Šæ›´å¯ä¿¡ï¼‰
    answers: {},          // key: QID_main / QID_follow
    finished: false
  };

  // ======================
  // DOM helpers
  // ======================
  const $ = (id)=>document.getElementById(id);
  const viewStart = $("viewStart");
  const viewQuestion = $("viewQuestion");
  const viewThanks = $("viewThanks");

  function show(view){
    viewStart.style.display = "none";
    viewQuestion.style.display = "none";
    viewThanks.style.display = "none";
    view.style.display = "block";
  }
  function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
  function loadState(){
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return;
    try{ state = JSON.parse(raw); }catch{}
  }
  function clearLocal(){ localStorage.removeItem(STORAGE_KEY); }

  function roleLabel(role){
    return role === "OPS" ? "è¿è¥å˜ç°å²—ï¼ˆPR+PMåˆå¹¶ï¼‰" : "é”€å”®å²—ï¼ˆæ—¥æœ¬å®¢æˆ·ï¼‰";
  }
  function questions(){ return QUESTIONNAIRE[state.role] || []; }
  function getCurrentQ(){ return questions()[state.idx]; }
  function currentAnswerKey(){
    const q = getCurrentQ();
    return (state.stage === "main") ? (q.id + "_main") : (q.id + "_follow");
  }

  function renderQuestion(){
    const qs = questions();
    const q = getCurrentQ();
    $("progressText").textContent = `Question ${state.idx+1}/${qs.length}`;
    $("roleText").textContent = roleLabel(state.role);

    if(state.stage === "main"){
      $("qTitle").textContent = q.q;
      $("answer").placeholder = "åœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å›ç­”...";
    }else{
      $("qTitle").textContent = "è¿½é—®ï¼š" + q.f;
      $("answer").placeholder = "è¯·è¡¥å……æ›´å…·ä½“çš„ç»†èŠ‚ï¼ˆæ•°å­—/æ­¥éª¤/è´Ÿè´£äºº/æ—¶é—´/é£é™©ï¼‰...";
    }

    $("answer").value = state.answers[currentAnswerKey()] || "";
    $("btnPrev").disabled = (state.idx === 0 && state.stage === "main");
    $("btnNext").textContent = (state.idx === qs.length - 1 && state.stage === "main") ? "æäº¤" : "ä¸‹ä¸€é¢˜";

    // å€™é€‰äººä¸æ˜¾ç¤ºä»»ä½•è§£é‡Šï¼›ç®¡ç†å‘˜ä¼šçœ‹åˆ°è¿½é—®è®¡æ•°
    $("smallHint").textContent = "";
    refreshAdminPills();
  }

  function saveCurrent(){
    state.answers[currentAnswerKey()] = $("answer").value;
    saveState();
    refreshAdminPills();
  }
  function requireAnswer(){
    const v = $("answer").value.trim();
    if(!v){
      alert("è¯·å…ˆå¡«å†™å›ç­”ã€‚");
      return false;
    }
    return true;
  }

  // ======================
  // Admin: UI show/hide
  // ======================
  function togglePanel(panelId){
    const panel = $(panelId);
    panel.style.display = (panel.style.display === "block") ? "none" : "block";
  }
  function unlock(pwdInputId, actionsId){
    const pwd = $(pwdInputId).value;
    if(pwd !== ADMIN_PASSWORD){
      alert("å¯†ç é”™è¯¯");
      return false;
    }
    $(actionsId).style.display = "block";
    refreshAdminPills();
    return true;
  }
  function refreshAdminPills(){
    const pill1 = $("followCountPill");
    const pill2 = $("followCountPill2");
    if(pill1) pill1.textContent = `è¿½é—®è§¦å‘ï¼š${state.followCount}/${MAX_FOLLOWUPS}`;
    if(pill2) pill2.textContent = `è¿½é—®è§¦å‘ï¼š${state.followCount}/${MAX_FOLLOWUPS}`;
  }

  // ======================
  // Admin: report copy
  // ======================
  function reportPrompt(){
    return `ä½ æ˜¯èµ„æ·±é¢è¯•å®˜ + ç»„ç»‡å¿ƒç†é¡¾é—® + ç”¨äººç»ç†ã€‚
æˆ‘ä»¬å…¬å¸åœ¨æ—¥æœ¬ï¼Œé¢å‘æ—¥æœ¬å®¢æˆ·åšä¸¤ç±»ä¸šåŠ¡ï¼š
1ï¼‰è´¦å·è¿è¥ï¼ˆå°çº¢ä¹¦/æŠ–éŸ³ï¼‰ï¼Œé€šè¿‡å†…å®¹ä¸å¢é•¿å¸®åŠ©å®¢æˆ·å˜ç°
2ï¼‰æ‹›å‹ŸKOC/KOLåˆ°åº—æ¢åº—å¹¶å‘å¸ƒSNSå†…å®¹åšå®£ä¼ ï¼Œäº¤ä»˜å†…å®¹è´¨é‡ä¸æ•°æ®å¤ç›˜

ç°åœ¨æˆ‘ä¼šç»™ä½ å€™é€‰äººçš„â€œå²—ä½ä¿¡æ¯ + 10é¢˜å®Œæ•´é—®ç­”è®°å½•ï¼ˆå«å¯èƒ½è§¦å‘çš„è¿½é—®ï¼‰â€ã€‚
è¯·ç”Ÿæˆä¸€ä»½ã€éå¸¸è¯¦ç»†ã€å¯è§£é‡Šã€å¯è¿½æº¯è¯æ®ã€‘çš„é¢è¯•è¯„ä¼°æŠ¥å‘Šã€‚

ã€ç¡¬æ€§è¦æ±‚ï¼šå¿…é¡»å…¨éƒ¨æ»¡è¶³ã€‘
A. æŠ¥å‘Šå¿…é¡»åŒ…å«â€œå®Œæ•´é¢˜ç›®+å®Œæ•´å›ç­”åŸæ–‡â€ï¼ˆé€é¢˜åˆ—å‡ºï¼‰
B. æ¯ä¸€é“é¢˜éƒ½è¦è¾“å‡ºï¼š
   1) æœ¬é¢˜è€ƒå¯Ÿç›®çš„ï¼ˆèƒ½åŠ›/é£é™©ç‚¹ï¼‰
   2) å›ç­”å€¾å‘ï¼šåæ˜ äº†ä»€ä¹ˆæ€§æ ¼/æ€ç»´æ–¹å¼/ä»·å€¼è§‚ï¼ˆå…·ä½“ï¼‰
   3) é€»è¾‘ä¸è¯æ®æ¼æ´ï¼šå› æœè·³è·ƒã€ç¼ºæ•°æ®ã€ç©ºè¯ã€è¿‡åº¦æ‰¿è¯ºã€é£é™©å¿½ç•¥ç­‰ï¼ˆæ— æ¼æ´ä¹Ÿè¦å†™ä¼˜ç‚¹ï¼‰
   4) äºŒé¢è¿½é—®å»ºè®®ï¼ˆ1-2æ¡ï¼‰
C. å¤šç»´åº¦è¯„åˆ†ï¼ˆäº”æ˜Ÿâ˜…â˜…â˜…â˜…â˜…æ»¡åˆ†ï¼‰ï¼Œæ¯ä¸ªç»´åº¦å¿…é¡»å†™â€œä¾æ®â€ï¼Œå¹¶å¼•ç”¨é¢˜å·ï¼š
   - é€»è¾‘ç»“æ„
   - æ‰§è¡Œè½åœ°
   - æ•°æ®&å¤ç›˜
   - æ²Ÿé€šåä½œï¼ˆå«å¯¹å®¢ï¼‰
   - é£é™©ä¸è¾¹ç•Œæ„è¯†
   - ç¨³å®šæ€§/æŠ—å‹
   - ï¼ˆé”€å”®å²—é¢å¤–ï¼‰å®¢æˆ·å¿ƒç†æ´å¯Ÿä¸æ¨è¿›èƒ½åŠ›
D. ä¼˜åŠ¿Top3ä¸å¼±åŠ¿Top3ï¼šæ¯æ¡å¿…é¡»å¼•ç”¨è¯æ®ï¼ˆQå‡  + å“ªäº›å›ç­”ç‰¹å¾ï¼‰
E. è¿‡å¾€ç»éªŒç”»åƒæ¨æ–­ï¼šå¿…é¡»æ ‡æ³¨â€œæ¨æ–­â€ï¼Œç»™ç½®ä¿¡åº¦ï¼ˆé«˜/ä¸­/ä½ï¼‰+ ä¾æ®
F. æœ€ç»ˆå½•ç”¨å»ºè®®ï¼šå¼ºæ¨/å¯åŸ¹å…»/è°¨æ…/ä¸å»ºè®® + åŸå›  + é£é™©æç¤º + åŸ¹å…»å»ºè®®

ã€è¾“å‡ºç»“æ„ï¼ˆæŒ‰æ ‡é¢˜ï¼‰ã€‘
1. å€™é€‰äººæ¦‚è§ˆ
2. é¢è¯•å®Œæ•´è®°å½•ï¼ˆQ1-A1...å«è¿½é—®ï¼‰
3. é€é¢˜è¯„ä¼°ï¼ˆç›®çš„/å€¾å‘/æ¼æ´/è¿½é—®å»ºè®®ï¼‰
4. å¤šç»´åº¦è¯„åˆ†ï¼ˆäº”æ˜Ÿ+ä¾æ®ï¼‰
5. ä¼˜åŠ¿Top3ï¼ˆè¯æ®ï¼‰
6. å¼±åŠ¿Top3ï¼ˆè¯æ®ï¼‰
7. ç»éªŒç”»åƒæ¨æ–­ï¼ˆæ¨æ–­+ç½®ä¿¡åº¦+ä¾æ®ï¼‰
8. å½•ç”¨å»ºè®®ä¸é£é™©æç¤º

è¯­è¨€ï¼šä¸­æ–‡ï¼Œé£æ ¼åŠ¡å®ï¼Œä¸è¦ç©ºè¯ï¼Œä¸è¦å¹æ§ã€‚`;
  }

  function buildQA(){
    const qs = questions();
    const lines = [];

    lines.push(`ã€å²—ä½ã€‘${roleLabel(state.role)}`);
    lines.push(`ã€å€™é€‰äººå§“åã€‘${state.name || "æœªå¡«å†™"}`);
    lines.push(`ã€è‡ªæˆ‘æè¿°ã€‘${(state.intro || "æœªå¡«å†™").trim()}`);
    lines.push(`ã€è¿½é—®è§¦å‘æ¬¡æ•°ã€‘${state.followCount}/${MAX_FOLLOWUPS}`);

    if(state.suppressedFollowups?.length){
      lines.push(`ã€è¿½é—®ä¸Šé™æŠ‘åˆ¶è®°å½•ã€‘`);
      state.suppressedFollowups.forEach((x, i)=>{
        lines.push(`- ${i+1}. ${x.qid}ï¼ˆåŸå› ï¼š${x.reason}ï¼‰`);
      });
    }

    lines.push("");
    lines.push("ã€é¢è¯•é—®ç­”ã€‘");

    qs.forEach((q, i)=>{
      const mainKey = q.id + "_main";
      const followKey = q.id + "_follow";
      const mainAns = (state.answers[mainKey] || "").trim() || "ï¼ˆæœªä½œç­”ï¼‰";
      const followAns = (state.answers[followKey] || "").trim();

      lines.push(`Q${i+1}ï¼š${q.q}`);
      lines.push(`A${i+1}ï¼š${mainAns}`);

      if(followAns){
        lines.push(`è¿½é—®ï¼š${q.f}`);
        lines.push(`è¿½é—®å›ç­”ï¼š${followAns}`);
      }
      lines.push("");
    });

    return lines.join("\n");
  }

  async function copyText(text){
    try{
      await navigator.clipboard.writeText(text);
      alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚");
    }catch(e){
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      document.body.removeChild(ta);
      alert("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰ã€‚");
    }
  }

  function copyAll(){
    const text = `${reportPrompt()}\n\n-----\n\nç°åœ¨è¯·åŸºäºä»¥ä¸‹é—®ç­”ç”ŸæˆæŠ¥å‘Šï¼š\n\n${buildQA()}`;
    copyText(text);
  }
  function copyQAOnly(){
    copyText(buildQA());
  }

  // ======================
  // Events: Candidate flow
  // ======================
  $("btnStart").addEventListener("click", ()=>{
    const name = $("candName").value.trim();
    if(!name){
      alert("è¯·å…ˆè¾“å…¥å§“åã€‚");
      return;
    }

    state.name = name;
    state.role = $("role").value;
    state.intro = $("candIntro").value.trim();

    state.idx = 0;
    state.stage = "main";
    state.followReason = "";
    state.followCount = 0;
    state.suppressedFollowups = [];
    state.answers = {};
    state.finished = false;

    saveState();
    show(viewQuestion);
    renderQuestion();
  });

  $("btnClearLocal").addEventListener("click", ()=>{
    if(confirm("ç¡®å®šæ¸…é™¤æœ¬åœ°è®°å½•å—ï¼Ÿ")){
      clearLocal();
      location.reload();
    }
  });

  $("btnSave").addEventListener("click", ()=>{
    if(!requireAnswer()) return;
    saveCurrent();
    alert("å·²ä¿å­˜");
  });

  $("btnPrev").addEventListener("click", ()=>{
    saveCurrent();

    // è¿½é—®é˜¶æ®µï¼šå›åˆ°ä¸»é—®ï¼ˆåŒä¸€é¢˜ï¼‰
    if(state.stage === "followup"){
      state.stage = "main";
      saveState();
      renderQuestion();
      return;
    }

    // ä¸»é—®é˜¶æ®µï¼šä¸Šä¸€é¢˜
    state.idx = Math.max(0, state.idx - 1);
    state.stage = "main";
    saveState();
    renderQuestion();
  });

  $("btnNext").addEventListener("click", ()=>{
    if(!requireAnswer()) return;

    const qs = questions();
    const q = getCurrentQ();
    const txt = $("answer").value.trim();

    saveCurrent();

    if(state.stage === "main"){
      // åˆ¤æ–­æ˜¯å¦è§¦å‘è¿½é—®ï¼ˆä½†æœ€å¤š3æ¬¡ï¼‰
      const judge = shouldAskFollowup(state.role, txt);

      if(judge.yes){
        if(state.followCount < MAX_FOLLOWUPS){
          state.stage = "followup";
          state.followReason = judge.reason;
          state.followCount += 1;
          saveState();
          renderQuestion();
          return;
        }else{
          // å·²è¾¾åˆ°ä¸Šé™ï¼šè®°å½•â€œæœ¬åº”è¿½é—®ä½†è¢«æŠ‘åˆ¶â€
          state.suppressedFollowups.push({ qid: q.id, reason: judge.reason });
          saveState();
        }
      }

      // ä¸è¿½é—®/æˆ–æŠ‘åˆ¶ï¼šè¿›å…¥ä¸‹ä¸€é¢˜æˆ–ç»“æŸ
      if(state.idx === qs.length - 1){
        state.finished = true;
        saveState();
        show(viewThanks);
        refreshAdminPills();
        return;
      }

      state.idx += 1;
      state.stage = "main";
      state.followReason = "";
      saveState();
      renderQuestion();
      return;
    }

    // è¿½é—®é˜¶æ®µï¼šç­”å®Œç›´æ¥ä¸‹ä¸€é¢˜æˆ–ç»“æŸ
    if(state.stage === "followup"){
      if(state.idx === qs.length - 1){
        state.finished = true;
        state.stage = "main";
        state.followReason = "";
        saveState();
        show(viewThanks);
        refreshAdminPills();
        return;
      }

      state.idx += 1;
      state.stage = "main";
      state.followReason = "";
      saveState();
      renderQuestion();
    }
  });

  $("answer").addEventListener("keydown", (e)=>{
    if(e.key === "Enter" && (e.ctrlKey || e.metaKey)){
      e.preventDefault();
      $("btnNext").click();
    }
  });

  $("btnBackHome").addEventListener("click", ()=>{
    // è¿™é‡Œä¸è‡ªåŠ¨æ¸…é™¤ï¼Œé¿å…ç®¡ç†å‘˜å¤åˆ¶å‰ä¸¢å¤±æ•°æ®
    // å¦‚æœä½ æƒ³è¿”å›å³æ¸…é™¤ï¼ŒæŠŠä¸‹é¢ä¸¤è¡Œå–æ¶ˆæ³¨é‡Šå³å¯ï¼š
    // clearLocal();
    location.reload();
  });

  // ======================
  // Events: Admin panels
  // ======================
  $("adminToggleStart").addEventListener("click", ()=>togglePanel("adminPanelStart"));
  $("adminToggleQ").addEventListener("click", ()=>togglePanel("adminPanelQ"));
  $("adminToggleThanks").addEventListener("click", ()=>togglePanel("adminPanelThanks"));

  $("btnUnlockStart").addEventListener("click", ()=>{
    if(unlock("adminPwdStart","adminActionsStart")){ /* ok */ }
  });
  $("btnUnlockQ").addEventListener("click", ()=>{
    if(unlock("adminPwdQ","adminActionsQ")){ /* ok */ }
  });
  $("btnUnlockThanks").addEventListener("click", ()=>{
    if(unlock("adminPwdThanks","adminActionsThanks")){ /* ok */ }
  });

  function resetAll(){
    if(confirm("ç¡®å®šé‡ç½®å…¨éƒ¨æ•°æ®å—ï¼Ÿï¼ˆä¼šæ¸…ç©ºå€™é€‰äººç­”æ¡ˆï¼‰")){
      clearLocal();
      location.reload();
    }
  }
  $("btnResetAllStart").addEventListener("click", resetAll);
  $("btnResetAllQ").addEventListener("click", resetAll);
  $("btnResetAllThanks").addEventListener("click", resetAll);

  $("btnCopyAll").addEventListener("click", copyAll);
  $("btnCopyQA").addEventListener("click", copyQAOnly);
  $("btnCopyAll2").addEventListener("click", copyAll);
  $("btnCopyQA2").addEventListener("click", copyQAOnly);

  // ======================
  // Init
  // ======================
  loadState();
  show(viewStart);

  // å¦‚æœä½ æƒ³â€œåˆ·æ–°åç»§ç»­ç­”é¢˜â€ï¼Œå¯ä»¥æ”¹æˆï¼š
  // if(state && state.name && !state.finished && Object.keys(state.answers||{}).length){ show(viewQuestion); renderQuestion(); }
  // ä½†ä¸ºé¿å…å€™é€‰äººå›°æƒ‘ï¼Œè¿™é‡Œé»˜è®¤å›åˆ°é¦–é¡µã€‚
</script>
</body>
</html>
